<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DEM-PBS: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DEM-PBS<span id="projectnumber">&#160;6.1.1</span>
   </div>
   <div id="projectbrief">Discrete Elements Method code for the PBS course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="constants_8h_source.html">constants.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="structs_8h_source.html">structs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="setparameters_8h_source.html">setparameters.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="initialise_8h_source.html">initialise.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nbrlist_8h_source.html">nbrlist.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="forces_8h_source.html">forces.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dynamics_8h_source.html">dynamics.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memory_8h_source.html">memory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fileoutput_8h_source.html">fileoutput.h</a>&quot;</code><br />
</div>
<p><a href="main_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe" id="r_a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">main The main of the DEM code. After initialization, a velocity-Verlet scheme is executed for a specified number of time steps.  <br /></td></tr>
</table>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a840291bc02cba5474a4cb46a9b9566fe" name="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main The main of the DEM code. After initialization, a velocity-Verlet scheme is executed for a specified number of time steps. </p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md0"></a>
2025 PBS Assignment: Granular Column (DEM) – Required Code Extensions</h2>
<p>This student starter code must be extended according to Assignment 4. The work is organized in four task groups (A–D). Below each item we point to the file(s) where you implement the required functionality and metrics. Keep instrumentation lightweight and modular so physical logic stays clear.</p>
<p>A. VERIFICATION (restitution) A1 Single particle – wall rebound:</p><ul>
<li>Reduce to num_part = 1 in set_parameters.c (temporary test mode).</li>
<li>Give initial downward velocity v0 and measure rebound velocity v1.</li>
<li>Compute e_n_pw = v1 / v0 and compare with tabulated bottom wall value.</li>
<li>(Optional) Automate a loop over several v0 and print CSV lines. A2 Two-particle head-on collision:</li>
<li>Set num_part = 2; place particles along z (or x) just apart.</li>
<li>Assign opposite velocities ±v0; measure post-collision speeds.</li>
<li>Compute e_n_pp; compare with specified particle–particle restitution.</li>
</ul>
<p>B. SLOPE STABILITY (rotated gravity) B1 Create a shallow packed bed. B2 Instead of tilting geometry, rotate gravity: set g = |g|*(sin θ, 0, -cos θ). B3 Scan θ until sustained particle motion occurs (define criterion: e.g. average |v| over bed &gt; threshold for N steps). Output suggestion: theta_deg, mean_speed, coordination_number. Code locations: modify gravity in set_parameters.c (add parameter slope_angle_deg), optionally update each step if sweeping.</p>
<p>C. CYLINDRICAL COLUMN INITIALIZATION C1 Cylindrical wall: Implement cylindrical_wall(...) in <a class="el" href="walls_8c.html">walls.c</a></p><ul>
<li>Center at (0.5 Lx, 0.5 Ly); radius R_cyl chosen so aspect ratio H/R_cyl ≈ 0.8 (adjust number of particles / height).</li>
<li>Overlap condition: radial distance rc = sqrt((x-xc)^2 + (y-yc)^2). Overlaps when rc + particle_radius &gt; R_cyl.</li>
<li>Populate riw = r - r_w (r_w is closest point on cylinder surface) and vw = 0.</li>
<li>Register via wall_function[...] and increment num_walls. C2 Packing inside cylinder (<a class="el" href="initialise_8c.html">initialise.c</a>): (i) Place particles initially on a loose lattice clipped to cylinder. (ii) Randomization: For example, temporarily set g = {0,0,0} and run until a random condition is met. (iii) Settling: restore gravity; run until kinetic energy per particle &lt; tolerance. C3 Profiles: After settling, compute radial φ(r) and axial φ(z) solids-volume fraction profiles.</li>
<li>Bin radii (0..R_cyl) and heights (0..H_final); accumulate particle volumes portionally by full inclusion (simplified).</li>
<li>Write to files: dens_radial.dat (r_center, phi_r) and dens_axial.dat (z_center, phi_z).</li>
</ul>
<p>D. COLUMN COLLAPSE D1 Wall removal: At collapse start (t=0 of collapse phase) remove cylindrical wall. D2 Time series: record trajectories at higher frequency during early spreading, then revert. D3 Metrics:</p><ul>
<li>h_max: max (z_i + R_i) after collapse.</li>
<li>R_base: max radial center distance plus its radius where particles rest (define threshold velocity).</li>
<li>Slope angle: fit tangent line to upper surface points (e.g. upper 10% of height) or compute arctan(h_max / R_base_eff). D4 Compare qualitatively with Lajeunesse et al. (scaling, shape trends). Keep code comments short; put discussion in report. </li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l00085">85</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
