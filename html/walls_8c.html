<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DEM-PBS: walls.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DEM-PBS<span id="projectnumber">&#160;6.1.1</span>
   </div>
   <div id="projectbrief">Discrete Elements Method code for the PBS course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">walls.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;<a class="el" href="constants_8h_source.html">constants.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="structs_8h_source.html">structs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nbrlist_8h_source.html">nbrlist.h</a>&quot;</code><br />
</div>
<p><a href="walls_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad9d046bde0d788135be010cacc2eca20" id="r_ad9d046bde0d788135be010cacc2eca20"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9d046bde0d788135be010cacc2eca20">bottom_wall</a> (struct <a class="el" href="struct_parameters.html">Parameters</a> *p_parameters, double radius, struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *r, struct <a class="el" href="struct_delta_r.html">DeltaR</a> *riw, struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *vw)</td></tr>
<tr class="memdesc:ad9d046bde0d788135be010cacc2eca20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Model for wall located at z=0. This function can be used to model soft-sphere interactions with the bottom wall.  <br /></td></tr>
<tr class="memitem:a1449c96bd071a02b82087fe71e7a3cb1" id="r_a1449c96bd071a02b82087fe71e7a3cb1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1449c96bd071a02b82087fe71e7a3cb1">top_wall</a> (struct <a class="el" href="struct_parameters.html">Parameters</a> *p_parameters, double radius, struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *r, struct <a class="el" href="struct_delta_r.html">DeltaR</a> *riw, struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *vw)</td></tr>
<tr class="memdesc:a1449c96bd071a02b82087fe71e7a3cb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Model for wall located at z=L.z. This function can be used to model soft-sphere interactions with the top wall.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Wall interaction helper functions. Currently only a bottom and top planar wall are implemented. For the 2025 assignment you must implement an additional cylindrical wall that confines the initial granular column (Task C1) and later remove it to study the collapse (Task D1).</p>
<p>The wall function signature: bool wall(struct Parameters *p_parameters, double radius, struct Vec3D *r,
            struct DeltaR *riw, struct Vec3D *vw) returns true if the particle at position r (center) of given radius overlaps with the wall. On true you must set: riw -&gt; vector (and squared length) from particle centre to closest wall point vw -&gt; local wall velocity at that point (zero for static walls).</p>
<p>(Task C1) Implement a function <span class="tt">cylindrical_wall</span> that detects overlap with a vertical cylinder of radius R_cyl centered in the domain (suggest choose centre at (0.5 Lx, 0.5 Ly)). Provide riw pointing outward (from wall point to particle?) consistent with existing planar walls: currently riw = (particle - wallpoint). Set vw = {0,0,0}. Register this wall via parameters-&gt;wall_function[...] in set_parameters.c. After initial packing and before collapse (Task D1) remove the cylinder by removing its function pointer from parameters-&gt;wall_function[...] in set_parameters.c. </p>

<p class="definition">Definition in file <a class="el" href="walls_8c_source.html">walls.c</a>.</p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ad9d046bde0d788135be010cacc2eca20" name="ad9d046bde0d788135be010cacc2eca20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9d046bde0d788135be010cacc2eca20">&#9670;&#160;</a></span>bottom_wall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool bottom_wall </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_parameters.html">Parameters</a> *</td>          <td class="paramname"><span class="paramname"><em>p_parameters</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>radius</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *</td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_delta_r.html">DeltaR</a> *</td>          <td class="paramname"><span class="paramname"><em>riw</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *</td>          <td class="paramname"><span class="paramname"><em>vw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Model for wall located at z=0. This function can be used to model soft-sphere interactions with the bottom wall. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_parameters</td><td>member used: v_wall </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">radius</td><td>of a particle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">r</td><td>position vector of a particle </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">riw</td><td>position of particle minus closest point on wall rw: riw = r-rw </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">vw</td><td>velocity of wall at point rw. Current implementation vw = p_parameters-&gt;v_wall </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool, true if particle and wall overlap false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="walls_8c_source.html#l00034">34</a> of file <a class="el" href="walls_8c_source.html">walls.c</a>.</p>

</div>
</div>
<a id="a1449c96bd071a02b82087fe71e7a3cb1" name="a1449c96bd071a02b82087fe71e7a3cb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1449c96bd071a02b82087fe71e7a3cb1">&#9670;&#160;</a></span>top_wall()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool top_wall </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="struct_parameters.html">Parameters</a> *</td>          <td class="paramname"><span class="paramname"><em>p_parameters</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>radius</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *</td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_delta_r.html">DeltaR</a> *</td>          <td class="paramname"><span class="paramname"><em>riw</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="struct_vec3_d.html">Vec3D</a> *</td>          <td class="paramname"><span class="paramname"><em>vw</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Model for wall located at z=L.z. This function can be used to model soft-sphere interactions with the top wall. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_parameters</td><td>member used: v_wall </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">radius</td><td>of a particle </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">r</td><td>position vector of a particle </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">riw</td><td>position of particle minus closest point on wall rw: riw = r-rw </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">vw</td><td>velocity of wall at point rw. Current implementation vw = 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool, true if particle and wall overlap false otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="walls_8c_source.html#l00049">49</a> of file <a class="el" href="walls_8c_source.html">walls.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
